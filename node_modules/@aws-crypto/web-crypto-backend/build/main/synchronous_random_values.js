"use strict";
/*
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"). You may not use
 * this file except in compliance with the License. A copy of the License is
 * located at
 *
 *     http://aws.amazon.com/apache2.0/
 *
 * or in the "license" file accompanying this file. This file is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 * implied. See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const ie11_detection_1 = require("@aws-crypto/ie11-detection");
const supports_web_crypto_1 = require("@aws-crypto/supports-web-crypto");
const util_locate_window_1 = require("@aws-sdk/util-locate-window");
/* There are uses for a synchronous random source.
 * For example constructors need to be synchronous.
 * The AWS JS SDK uses IRandomValues to have a consistent interface.
 */
function synchronousRandomValues(byteLength) {
    // Find the global scope for this runtime
    const globalScope = util_locate_window_1.locateWindow();
    if (supports_web_crypto_1.supportsSecureRandom(globalScope)) {
        return globalScope.crypto.getRandomValues(new Uint8Array(byteLength));
    }
    else if (ie11_detection_1.isMsWindow(globalScope)) {
        const values = new Uint8Array(byteLength);
        globalScope.msCrypto.getRandomValues(values);
        return values;
    }
    throw new Error(`Unable to locate a secure random source.`);
}
exports.synchronousRandomValues = synchronousRandomValues;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3luY2hyb25vdXNfcmFuZG9tX3ZhbHVlcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zeW5jaHJvbm91c19yYW5kb21fdmFsdWVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7OztHQWFHOztBQUVILCtEQUF1RDtBQUN2RCx5RUFBc0U7QUFDdEUsb0VBQTBEO0FBRTFEOzs7R0FHRztBQUNILFNBQWdCLHVCQUF1QixDQUFFLFVBQWtCO0lBQ3pELHlDQUF5QztJQUN6QyxNQUFNLFdBQVcsR0FBRyxpQ0FBWSxFQUFFLENBQUE7SUFFbEMsSUFBSSwwQ0FBb0IsQ0FBQyxXQUFXLENBQUMsRUFBRTtRQUNyQyxPQUFPLFdBQVcsQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLElBQUksVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUE7S0FDdEU7U0FBTSxJQUFJLDJCQUFVLENBQUMsV0FBVyxDQUFDLEVBQUU7UUFDbEMsTUFBTSxNQUFNLEdBQUcsSUFBSSxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDekMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUE7UUFDNUMsT0FBTyxNQUFNLENBQUE7S0FDZDtJQUVELE1BQU0sSUFBSSxLQUFLLENBQUMsMENBQTBDLENBQUMsQ0FBQTtBQUM3RCxDQUFDO0FBYkQsMERBYUMifQ==