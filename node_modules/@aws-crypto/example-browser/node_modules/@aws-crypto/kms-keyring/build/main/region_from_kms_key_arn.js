"use strict";
/*
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"). You may not use
 * this file except in compliance with the License. A copy of the License is
 * located at
 *
 *     http://aws.amazon.com/apache2.0/
 *
 * or in the "license" file accompanying this file. This file is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 * implied. See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const material_management_1 = require("@aws-crypto/material-management");
function regionFromKmsKeyArn(kmsKeyArn) {
    /* Precondition: A KMS key arn must be a string. */
    material_management_1.needs(typeof kmsKeyArn === 'string', 'KMS key arn must be a string.');
    /* See: https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html#arn-syntax-kms
     * arn:aws:kms:us-east-1:123456789012:key/12345678-1234-1234-1234-123456789012
     * arn:aws:kms:us-east-1:123456789012:alias/example-alias
     */
    const [arnLiteral, partition, service, region] = kmsKeyArn.split(':');
    /* Postcondition: The ARN must be well formed.
     * The arn and kms section have defined values,
     * but the aws section does not.
     */
    material_management_1.needs(arnLiteral === 'arn' &&
        partition &&
        service === 'kms' &&
        region, 'Malformed arn.');
    return region;
}
exports.regionFromKmsKeyArn = regionFromKmsKeyArn;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVnaW9uX2Zyb21fa21zX2tleV9hcm4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvcmVnaW9uX2Zyb21fa21zX2tleV9hcm4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7O0dBYUc7O0FBRUgseUVBQXVEO0FBRXZELFNBQWdCLG1CQUFtQixDQUFFLFNBQWlCO0lBQ3BELG1EQUFtRDtJQUNuRCwyQkFBSyxDQUFDLE9BQU8sU0FBUyxLQUFLLFFBQVEsRUFBRSwrQkFBK0IsQ0FBQyxDQUFBO0lBRXJFOzs7T0FHRztJQUNILE1BQU0sQ0FBQyxVQUFVLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBRXJFOzs7T0FHRztJQUNILDJCQUFLLENBQ0gsVUFBVSxLQUFLLEtBQUs7UUFDcEIsU0FBUztRQUNULE9BQU8sS0FBSyxLQUFLO1FBQ2pCLE1BQU0sRUFDTixnQkFBZ0IsQ0FBQyxDQUFBO0lBRW5CLE9BQU8sTUFBTSxDQUFBO0FBQ2YsQ0FBQztBQXRCRCxrREFzQkMifQ==